<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo.png" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HoneyZest | Premium Honey</title> 
    <script type="module" crossorigin src="/assets/index-DhJegbq9.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-BV2zvQa6.css">
  </head>
  <body>
    <!-- !!! CRITICAL: DO NOT DELETE THESE TWO LINES !!! -->
    <div id="root"></div>
    <!-- !!! YOUR WEBSITE LIVES ABOVE THIS LINE !!! -->

    <!-- ================================================== -->
    <!-- START: HONEYZEST INTELLIGENT ENVIRONMENT SYSTEM    -->
    <!-- ================================================== -->

    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>

    <style>
      /* --- 1. SETTINGS BUTTON (Placed near Nav Bar) --- */
      #hz-smart-gear {
        position: fixed; 
        top: 20px; right: 20px; /* ALIGNS WITH NAV BAR */
        width: 45px; height: 45px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255,255,255,0.4);
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; z-index: 99999;
        font-size: 22px; 
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      #hz-smart-gear:hover { 
        background: #fff; transform: rotate(180deg) scale(1.1); color: #eab308; 
      }

      /* --- 2. THE DASHBOARD PANEL --- */
      #hz-dashboard {
        position: fixed; top: 75px; right: 20px;
        width: 320px;
        background: rgba(20, 20, 20, 0.95); /* Dark Premium Theme */
        color: #fff;
        border-radius: 16px;
        padding: 0;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.1);
        z-index: 99998;
        font-family: 'Inter', system-ui, sans-serif;
        transform-origin: top right;
        transform: scale(0.9) translateY(-20px);
        opacity: 0; pointer-events: none;
        transition: all 0.3s ease;
      }
      #hz-dashboard.active { opacity: 1; transform: scale(1) translateY(0); pointer-events: auto; }

      /* HEADER */
      .hz-dash-header {
        padding: 15px 20px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        display: flex; justify-content: space-between; align-items: center;
        background: linear-gradient(90deg, #eab308, #ca8a04); /* Honey Gold */
        border-radius: 16px 16px 0 0;
      }
      .hz-dash-header h3 { margin: 0; font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #fff; }
      
      /* BODY */
      .hz-dash-body { padding: 20px; max-height: 70vh; overflow-y: auto; }
      
      /* SECTIONS */
      .hz-group { margin-bottom: 20px; }
      .hz-label { font-size: 11px; color: #94a3b8; text-transform: uppercase; font-weight: 700; margin-bottom: 8px; display: block; }
      
      /* INPUTS */
      .hz-select {
        width: 100%; padding: 10px; background: #334155; border: 1px solid #475569;
        color: #fff; border-radius: 8px; font-size: 13px; outline: none; cursor: pointer;
        -webkit-appearance: none;
           -moz-appearance: none;
                appearance: none; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
        background-repeat: no-repeat; background-position: right 10px top 50%; background-size: 10px auto;
      }
      .hz-select:disabled { opacity: 0.5; cursor: not-allowed; }

      /* TOGGLE SWITCH */
      .hz-toggle-row { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #1e293b; border-radius: 8px; margin-bottom: 15px; border: 1px solid #334155; }
      .hz-toggle-text { font-size: 13px; font-weight: 600; color: #fff; }
      .hz-toggle-sub { font-size: 10px; color: #22d3ee; display: block; margin-top: 2px; }
      
      /* STATUS FOOTER */
      .hz-dash-footer {
        padding: 10px 20px; font-size: 10px; color: #64748b; text-align: center;
        border-top: 1px solid rgba(255,255,255,0.1); background: #0f172a; border-radius: 0 0 16px 16px;
      }

      /* ATMOSPHERE OVERLAYS */
      .hz-weather-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9997; opacity: 0; transition: opacity 2s ease; }
      .hz-night { background: linear-gradient(to bottom, rgba(2,6,23,0.8), rgba(0,0,0,0.4)); }
      .hz-mist { background: rgba(255,255,255,0.15); backdrop-filter: blur(3px); }
      .hz-flash { background: white; z-index: 9999; opacity: 0; transition: opacity 0.1s; }
      .active { opacity: 1 !important; }
    </style>

    <!-- 3. HTML VISUAL ELEMENTS -->
    <div id="hz-layer-night" class="hz-weather-overlay hz-night"></div>
    <div id="hz-layer-mist" class="hz-weather-overlay hz-mist"></div>
    <div id="hz-layer-flash" class="hz-weather-overlay hz-flash"></div>

    <!-- The Gear Icon (Top Right) -->
    <div id="hz-smart-gear" onclick="toggleDashboard()">âš™ï¸</div>

    <!-- The Smart Dashboard -->
    <div id="hz-dashboard">
      <div class="hz-dash-header">
        <h3>System Settings</h3>
        <div style="cursor:pointer;" onclick="toggleDashboard()">âœ•</div>
      </div>
      <div class="hz-dash-body">
        
        <!-- Auto Detect Switch -->
        <div class="hz-toggle-row">
          <div>
            <span class="hz-toggle-text">Smart Auto-Detect</span>
            <span class="hz-toggle-sub" id="hz-detected-info">Locating...</span>
          </div>
          <input type="checkbox" id="hz-auto-check" checked onchange="toggleAutoMode(this.checked)" style="width:18px; height:18px; cursor:pointer;">
        </div>

        <!-- Weather Control -->
        <div class="hz-group">
          <label class="hz-label">Live Atmosphere</label>
          <select id="hz-weather-select" class="hz-select" onchange="manualOverride()" disabled>
            <option value="clear">â˜€ï¸ Sunny / Clear</option>
            <option value="rain">ğŸŒ§ï¸ Heavy Rain</option>
            <option value="drizzle">ğŸŒ¦ï¸ Light Drizzle</option>
            <option value="thunder">âš¡ Thunderstorm</option>
            <option value="snow">â„ï¸ Snowfall</option>
            <option value="wind">ğŸƒ Windy / Storm</option>
            <option value="mist">ğŸŒ«ï¸ Foggy / Mist</option>
            <option value="night">ğŸŒ™ Clear Night</option>
          </select>
        </div>

        <!-- Currency Control -->
        <div class="hz-group">
          <label class="hz-label">Currency</label>
          <select id="hz-currency-select" class="hz-select" onchange="manualOverride()" disabled>
            <optgroup label="Popular">
              <option value="KES">ğŸ‡°ğŸ‡ª KES - Kenyan Shilling</option>
              <option value="USD">ğŸ‡ºğŸ‡¸ USD - US Dollar</option>
              <option value="GBP">ğŸ‡¬ğŸ‡§ GBP - British Pound</option>
              <option value="EUR">ğŸ‡ªğŸ‡º EUR - Euro</option>
            </optgroup>
            <optgroup label="Africa">
              <option value="NGN">ğŸ‡³ğŸ‡¬ NGN - Nigerian Naira</option>
              <option value="ZAR">ğŸ‡¿ğŸ‡¦ ZAR - South African Rand</option>
              <option value="GHS">ğŸ‡¬ğŸ‡­ GHS - Ghanaian Cedi</option>
              <option value="UGX">ğŸ‡ºğŸ‡¬ UGX - Ugandan Shilling</option>
              <option value="TZS">ğŸ‡¹ğŸ‡¿ TZS - Tanzanian Shilling</option>
            </optgroup>
            <optgroup label="Global">
              <option value="AED">ğŸ‡¦ğŸ‡ª AED - UAE Dirham</option>
              <option value="CAD">ğŸ‡¨ğŸ‡¦ CAD - Canadian Dollar</option>
              <option value="AUD">ğŸ‡¦ğŸ‡º AUD - Australian Dollar</option>
              <option value="JPY">ğŸ‡¯ğŸ‡µ JPY - Japanese Yen</option>
              <option value="CNY">ğŸ‡¨ğŸ‡³ CNY - Chinese Yuan</option>
              <option value="INR">ğŸ‡®ğŸ‡³ INR - Indian Rupee</option>
            </optgroup>
          </select>
        </div>

        <!-- Language Control -->
        <div class="hz-group">
          <label class="hz-label">Language</label>
          <select id="hz-lang-select" class="hz-select" onchange="manualOverride()" disabled>
            <option value="en">English (UK/US)</option>
            <option value="sw">Kiswahili (Swahili)</option>
            <option value="fr">FranÃ§ais (French)</option>
            <option value="de">Deutsch (German)</option>
            <option value="es">EspaÃ±ol (Spanish)</option>
            <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
            <option value="zh">ä¸­æ–‡ (Chinese)</option>
            <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)</option>
          </select>
        </div>

      </div>
      <div class="hz-dash-footer">
        Powered by HoneyZest Smart AI
      </div>
    </div>

    <!-- 4. INTELLIGENT SCRIPT -->
    <script>
      // === CONFIGURATION ===
      const API_KEY = "cbcace2f2fd0530b63a92e3cd2ed6fe0";
      // React Elements to Bounce Off (Nav, Buttons, Cards)
      const BOUNCE_TARGETS = ".btn, button, input, .card, img, nav, header, .logo, a";

      let tsInstance;
      let thunderInterval;

      // === 1. UI FUNCTIONS ===
      function toggleDashboard() {
        document.getElementById('hz-dashboard').classList.toggle('active');
      }

      function toggleAutoMode(isAuto) {
        // Enable/Disable Selects
        document.getElementById('hz-weather-select').disabled = isAuto;
        document.getElementById('hz-currency-select').disabled = isAuto;
        document.getElementById('hz-lang-select').disabled = isAuto;

        if (isAuto) {
          runAutoDetect();
        } else {
          document.getElementById('hz-detected-info').innerText = "Manual Override Mode";
        }
      }

      function manualOverride() {
        const w = document.getElementById('hz-weather-select').value;
        const c = document.getElementById('hz-currency-select').value;
        const l = document.getElementById('hz-lang-select').value;
        
        loadWeatherTheme(w);
        savePreferences(c, l);
      }

      function savePreferences(curr, lang) {
        localStorage.setItem('honeyzest_currency', curr);
        localStorage.setItem('honeyzest_lang', lang);
        console.log("Settings Saved:", curr, lang);
      }

      // === 2. PARTICLE ENGINE (PHYSICS) ===
      function getParticleConfig(type) {
        const config = {
          fullScreen: { enable: true, zIndex: 9996 }, // Just behind the modal
          fpsLimit: 60,
          particles: { move: { enable: true } },
          interactivity: {
            detectsOn: "window",
            events: {
              onDiv: { selectors: BOUNCE_TARGETS, enable: true, mode: "bounce", type: "rectangle" }
            }
          }
        };

        // Reset Effects
        clearInterval(thunderInterval);
        document.getElementById('hz-layer-mist').classList.remove('active');
        document.getElementById('hz-layer-night').classList.remove('active');

        switch(type) {
          case 'rain':
          case 'thunder':
            config.particles = {
              number: { value: 120 }, color: { value: "#63a4ff" }, shape: { type: "line" },
              opacity: { value: 0.7 }, size: { value: { min: 1, max: 2 } },
              move: { enable: true, speed: 22, direction: "bottom", gravity: { enable: true, acceleration: 20 }, straight: true }
            };
            if(type === 'thunder') startThunder();
            break;
          case 'drizzle':
            config.particles = {
              number: { value: 60 }, color: { value: "#a2d2ff" }, shape: { type: "line" },
              opacity: { value: 0.5 }, size: { value: { min: 0.5, max: 1 } },
              move: { enable: true, speed: 10, direction: "bottom", gravity: { enable: true, acceleration: 5 } }
            };
            break;
          case 'snow':
            config.particles = {
              number: { value: 80 }, color: { value: "#fff" }, shape: { type: "circle" },
              opacity: { value: 0.9 }, size: { value: { min: 2, max: 5 } },
              move: { enable: true, speed: 3, direction: "bottom", random: true }
            };
            break;
          case 'wind':
            config.particles = {
              number: { value: 40 }, color: { value: ["#5e3a07", "#2f4f2f", "#8b5a2b"] },
              shape: { type: "polygon", options: { polygon: { sides: 3 } } },
              opacity: { value: 1 }, size: { value: { min: 3, max: 6 } },
              move: { enable: true, speed: 35, direction: "right" }
            };
            break;
          case 'mist':
            document.getElementById('hz-layer-mist').classList.add('active');
            config.particles = { number: { value: 0 } }; // No particles, just CSS fog
            break;
          case 'night':
            document.getElementById('hz-layer-night').classList.add('active');
            config.particles = {
              number: { value: 30 }, color: { value: "#fff" }, shape: { type: "star" },
              opacity: { value: 0.8 }, size: { value: { min: 1, max: 3 } },
              move: { enable: true, speed: 0.2, direction: "none", random: true }
            };
            break;
          default: // Clear/Sunny
            config.particles = {
              number: { value: 20 }, color: { value: "#FFD700" }, shape: { type: "circle" },
              opacity: { value: 0.4 }, size: { value: { min: 1, max: 3 } },
              move: { enable: true, speed: 1, direction: "none", random: true }
            };
        }
        return config;
      }

      async function loadWeatherTheme(theme) {
        const config = getParticleConfig(theme);
        if (tsInstance) { await tsInstance.load("tsparticles", config); }
        else { tsInstance = await tsParticles.load("tsparticles", config); }
      }

      function startThunder() {
        thunderInterval = setInterval(() => {
          if(Math.random() > 0.9) { 
            const flash = document.getElementById('hz-layer-flash');
            flash.style.opacity = 0.8;
            setTimeout(() => { flash.style.opacity = 0; }, 100);
          }
        }, 1200);
      }

      // === 3. INTELLIGENT MAPPING SYSTEM ===
      const COUNTRY_MAP = {
        'KE': { curr: 'KES', lang: 'sw' }, // Kenya
        'TZ': { curr: 'TZS', lang: 'sw' }, // Tanzania
        'UG': { curr: 'UGX', lang: 'en' }, // Uganda
        'NG': { curr: 'NGN', lang: 'en' }, // Nigeria
        'GH': { curr: 'GHS', lang: 'en' }, // Ghana
        'ZA': { curr: 'ZAR', lang: 'en' }, // South Africa
        'US': { curr: 'USD', lang: 'en' },
        'GB': { curr: 'GBP', lang: 'en' },
        'AE': { curr: 'AED', lang: 'ar' },
        'CN': { curr: 'CNY', lang: 'zh' },
        'JP': { curr: 'JPY', lang: 'en' }, // Japan often uses En for foreigners
        'IN': { curr: 'INR', lang: 'hi' },
        'FR': { curr: 'EUR', lang: 'fr' },
        'DE': { curr: 'EUR', lang: 'de' },
        'ES': { curr: 'EUR', lang: 'es' }
      };

      function runAutoDetect() {
        if (!navigator.geolocation) return;
        
        navigator.geolocation.getCurrentPosition(async (pos) => {
          const { latitude: lat, longitude: lon } = pos.coords;
          try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`);
            const data = await res.json();
            
            // 1. Identify Country & Defaults
            const countryCode = data.sys.country;
            const defaults = COUNTRY_MAP[countryCode] || { curr: 'USD', lang: 'en' };
            
            // 2. Update Status UI
            document.getElementById('hz-detected-info').innerHTML = `Detected: ${data.name}, ${countryCode}`;
            
            // 3. Set Dropdowns
            document.getElementById('hz-currency-select').value = defaults.curr;
            document.getElementById('hz-lang-select').value = defaults.lang;
            savePreferences(defaults.curr, defaults.lang);

            // 4. Set Weather
            const id = data.weather[0].id;
            const main = data.weather[0].main.toLowerCase();
            let theme = 'clear';

            const isNight = (data.dt > data.sys.sunset || data.dt < data.sys.sunrise);

            if (id >= 200 && id <= 232) theme = 'thunder';
            else if (id >= 300 && id <= 321) theme = 'drizzle';
            else if (id >= 500 && id <= 531) theme = 'rain';
            else if (id >= 600 && id <= 622) theme = 'snow';
            else if (id >= 700 && id <= 781) theme = 'mist';
            else if (data.wind.speed > 10) theme = 'wind';
            else if (isNight && main.includes('clear')) theme = 'night';

            document.getElementById('hz-weather-select').value = theme;
            loadWeatherTheme(theme);

          } catch (e) { console.error("Auto Detect Failed", e); }
        });
      }

      // === 4. STARTUP ===
      window.onload = () => {
        // Wait 2 seconds for React to mount the Nav Bar and Buttons
        setTimeout(() => {
          runAutoDetect();
        }, 2000);
      };

    </script>
  </body>
</html>